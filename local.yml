---
- hosts: localhost
  connection: local
  become: true

- name: Install packages
  package:
    name: "{{ item }}"
    state: present
  loop:
    - htop
    - tmux
    - python3-psutil
    - neovim
    - dconf
    - wireshark-qt
    - macchanger
    - binwalk
    - npm
    - golang
    - make
    - unzip
    - gcc
    - ripgrep
    # - gnome-tweaks
    # - gnome-shell-extension-arc-menu
    # - gnome-shell-extension-caffeine
    # - gnome-shell-extension-clipboard-indicator
    # - gnome-shell-extension-dash-to-panel
    # - gnome-shell-extension-just-perfection
    # - gnome-shell-extension-user-theme
  when: ansible_facts.pkg_mgr == 'apt'
  become: true

- name: Install packages
  package:
    name: "{{ item }}"
    state: present
  loop:
    - htop
    - tmux
    - python3-psutil
    - neovim
    - dconf
    - wireshark-qt
    - macchanger
    - binwalk
    - npm
    - golang
    - make
    - unzip
    - gcc
    - ripgrep
    # - gnome-tweaks
    # - gnome-shell-extension-arc-menu
    # - gnome-shell-extension-caffeine
    # - gnome-shell-extension-clipboard-indicator
    # - gnome-shell-extension-dash-to-panel
    # - gnome-shell-extension-just-perfection
    # - gnome-shell-extension-user-theme
  when: ansible_facts.pkg_mgr == 'yum' or ansible_facts.pkg_mgr == 'dnf'
  become: true

- name: copy wallpaper file
    copy: 
      src: files/wallpaper.png
      dest: /usr/share/backgrounds/ansible-wallpaper.png
      owner: root
      group: root

- name: set wallpaper
  become_user: james
  dconf: 
    key: "/org/gnome/desktop/background/picture-uri"
    value: "'file:///usr/share/backgrounds/ansible-wallpaper.png'"

- name: set wallpaper position
  become_user: james
    dconf:
    key: "/org/gnome/desktop/background/picture-options"
      alue: "'zoom'"

 